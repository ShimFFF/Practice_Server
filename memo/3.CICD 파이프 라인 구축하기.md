# 3. CI/CD 파이프 라인 구축하기

아직 안 한 것
*(dev prod 서버 분리 해주기!)*

### 1. AWS 설정하기
  1. vpc 만들기 (서울 리전)
    - IP 대역: 10.0.0.0/16
  2. vpc에 서브넷 만들기
    - CIDR: 10.0.1.0/24 (다음 서브넷 CIDR는 10.0.2.0/24)
  3. 게이트웨이 열어주기
    - vpc 연결하기
  4. 라우팅 테이블 수정
    - 0.0.0.0/0(외부 아이피 대역)이 목적지일 때, 인터넷 게이트웨이로 나가도록 설정
    - 해당 라우팅을 서브넷에 연결하기
  5. 보안 그룹 설정
  6. EC2 인스턴스 생성
    - Ubuntu 20.04
    - t2.micro
    - RSA 키페어 만들기기

### 2. Docker 설정하기
  1. 이미지를 만들기 위한 Dockerfile 추가
  2. 도커 컨테이너 실행을 편하게 하기 위해 docker-compose 추가
  3. docker-compose를 dev와 prod로 분리

### 3. (Github Action 설정하기)[https://github.com/ShimFFF/Practice_Server/tree/develop/.github/workflows]
  1. main, develop에 push 되었을 때에 따라, dev prod 액션 분리
  2. Java 17 세팅
  3. Secrets에 저장한 application.yml 값을 application.yml 파일에 쓰기
  4. Spring Boot 애플리케이션 빌드
  5. Docker 이미지 빌드
  6. DockerHub 로그인
  7. Docker Hub 이미지 푸시
  8. 서버에서 실행